# HEADブランチ変更機能 - 使用方法

## 概要
新しく実装されたHEADブランチ変更機能により、リポジトリのデフォルトブランチ（HEAD）を変更できるようになりました。

## 問題の解決
この機能により、以下の問題が解決されます：
- 新規作成されたリポジトリのHEADが`main`ブランチを指している状態で、`master`ブランチを指しているコミットをpushした場合、HEADが指しているブランチが異なってしまい、リポジトリのファイル一覧に表示されなくなる問題

## 使用方法

### 1. リポジトリ詳細ページでHEADブランチを確認
- リポジトリ詳細ページの「リポジトリ情報」セクションに「HEADブランチ」が表示されます
- 現在のHEADブランチが青いバッジで表示されます

### 2. HEADブランチの変更
1. 「HEADブランチ」の横にある「変更」ボタンをクリック
2. モーダルが開き、利用可能なブランチ一覧が表示されます
3. 新しいHEADブランチを選択
4. 「変更する」ボタンをクリック
5. 変更が完了すると、リポジトリ詳細が自動的に更新されます

### 3. API使用方法（上級者向け）
```bash
# HEADブランチをmasterに変更する例
curl -X POST http://localhost:1080/api/head/git/example-repo \
  -H "Content-Type: application/json" \
  -d '{"branch": "master"}'
```

## 実装された機能

### バックエンド（Go）
- `GET /api/repository/{group}/{repo}` - 現在のHEADブランチを含むリポジトリ詳細を返却
- `POST /api/head/{group}/{repo}` - HEADブランチを変更する新しいAPI

### フロントエンド（Vue.js）
- リポジトリ情報にHEADブランチ表示を追加
- HEADブランチ変更用のモーダルダイアログ
- ブランチ選択とバリデーション機能
- ESCキーでモーダルを閉じる機能

### セキュリティと検証
- 指定されたブランチが存在するかの確認
- 現在のHEADブランチと同じブランチへの変更を防止
- エラーハンドリングとユーザーフレンドリーなエラーメッセージ

## テスト手順
1. Guiltyアプリケーションをビルド・起動
2. 新しいリポジトリを作成
3. 複数のブランチを持つリポジトリで機能をテスト
4. HEADブランチを変更してファイル一覧が正しく表示されることを確認

## 注意事項
- HEADブランチを変更すると、リポジトリのファイル一覧がそのブランチの内容に切り替わります
- 存在しないブランチへの変更はエラーとなります
- この機能はベアリポジトリの`HEAD`ファイルを直接編集することで動作します
